(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(63)},43:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(20),s=a.n(r),i=(a(43),a(21)),l=a(22),c=a(25),d=a(23),u=a(26),h=a(18),m=a.n(h),f=(a(44),a(35)),p=a.n(f),g=a(37),y=a(30),w=a(33),E=a(31),v=a(32),L=(a(47),a(3)),k=a.n(L),F=a(27),b=a.n(F),j=(a(58),a(28)),O=a.n(j);delete k.a.Icon.Default.prototype._getIconUrl,k.a.Icon.Default.mergeOptions({iconRetinaUrl:a(59),iconUrl:a(60),shadowUrl:a(61)});var x=new k.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),H={.1:"#89BDE0",.2:"#96E3E6",.4:"#82CEB6",.6:"#FAF3A5",.8:"#F5D98B",1:"#DE9A96"},S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleFileChosen=function(t){var a=new FileReader;a.onloadend=function(){var t=p.a.parse(a.result,{header:!0,skipEmptyLines:!0});e.setState({jsondata:t.data,columns:t.meta.fields.map(function(e){return{Header:e,accessor:e}})})},a.readAsText(t)},e.handleSourceHeatMap=function(){if(console.log("heat"),0==e.state.sourceLayerHidden)e.setState({sourceLayerHidden:!0});else if(e.state.jsondata.length>0){console.log(e.state.jsondata);var t,a=e.state.jsondata.filter(function(e){return"NULL"!=e.from_lat&&"NULL"!=e.from_long});a=a.map(function(e){return[e.from_lat,e.from_long]}),a=O.a.countBy(a),t=(t=(a=Object.keys(a).map(function(e){return[parseFloat(e.split(",")[0]),parseFloat(e.split(",")[1]),parseFloat(a[e])]})).reduce(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=arguments.length>1?arguments[1]:void 0;return[e[0]+t[0],e[1]+t[1]]})).map(function(e){return e/a.length}),console.log(t),e.setState({center:t},function(){e.setState({sourceAddressPoints:a,sourceLayerHidden:!1,destLayerHidden:!0},function(){console.log(a)})})}else m.a.toast({html:"Please Select CSV first."})},e.handleDestHeatMap=function(){if(console.log("heat"),0==e.state.destLayerHidden)e.setState({destLayerHidden:!0});else if(e.state.jsondata.length>0){console.log(e.state.jsondata);var t,a=e.state.jsondata.filter(function(e){return"NULL"!=e.to_lat&&"NULL"!=e.to_long});a=a.map(function(e){return[e.to_lat,e.to_long]}),a=O.a.countBy(a),t=(t=(a=Object.keys(a).map(function(e){return[parseFloat(e.split(",")[0]),parseFloat(e.split(",")[1]),parseFloat(a[e])]})).reduce(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=arguments.length>1?arguments[1]:void 0;return[e[0]+t[0],e[1]+t[1]]})).map(function(e){return e/a.length}),console.log(t),e.setState({center:t},function(){e.setState({destAddressPoints:a,destLayerHidden:!1,sourceLayerHidden:!0},function(){console.log(a)})})}else m.a.toast({html:"Please Select CSV first."})},e.state={jsondata:[],columns:[],sourceAddressPoints:[],destAddressPoints:[],center:null,from:[0,0],to:[0,0],selected:null,sourceLayerHidden:!0,destLayerHidden:!0,showFromMarker:!1,showToMarker:!1},e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){m.a.AutoInit()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:"8vh"}},o.a.createElement("form",{action:"#",style:{width:"50%"}},o.a.createElement("div",{className:"file-field input-field"},o.a.createElement("div",{className:"btn black"},o.a.createElement("span",null,"CSV File"),o.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileChosen(t.target.files[0])}})),o.a.createElement("div",{className:"file-path-wrapper"},o.a.createElement("input",{className:"file-path validate",type:"text"})))),o.a.createElement("div",{style:{width:"50%",display:"flex",justifyContent:"space-around"}},o.a.createElement("div",{className:"btn black",onClick:this.handleSourceHeatMap},o.a.createElement("a",{className:"white-text"},"Source Heatmap : Turn ",this.state.sourceLayerHidden&&"ON",!this.state.sourceLayerHidden&&"OFF")),o.a.createElement("div",{className:"btn black",onClick:this.handleDestHeatMap},o.a.createElement("a",{className:"white-text"},"Destination Heatmap : Turn ",this.state.destLayerHidden&&"ON",!this.state.destLayerHidden&&"OFF")))),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"92vh"}},o.a.createElement(y.a,{style:{width:"50%",height:"92vh"},center:this.state.center,zoom:12},!this.state.sourceLayerHidden&&o.a.createElement(b.a,{fitBoundsOnLoad:!0,fitBoundsOnUpdate:!0,points:this.state.sourceAddressPoints,longitudeExtractor:function(e){return e[1]},latitudeExtractor:function(e){return e[0]},intensityExtractor:function(e){return e[2]},gradient:H}),!this.state.destLayerHidden&&o.a.createElement(b.a,{fitBoundsOnLoad:!0,fitBoundsOnUpdate:!0,points:this.state.destAddressPoints,longitudeExtractor:function(e){return e[1]},latitudeExtractor:function(e){return e[0]},intensityExtractor:function(e){return e[2]},gradient:H}),o.a.createElement(w.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),this.state.showFromMarker&&o.a.createElement(E.a,{position:this.state.from},o.a.createElement(v.a,null,"FROM")),this.state.showToMarker&&o.a.createElement(E.a,{position:this.state.to,icon:x},o.a.createElement(v.a,null,"TO"))),o.a.createElement(g.a,{style:{width:"50%",height:"92vh"},getTrProps:function(t,a){return a&&a.row&&"NULL"!==a.original.from_lat&&"NULL"!==a.original.from_long&&"NULL"!==a.original.to_lat&&"NULL"!==a.original.to_long?{onClick:function(t){console.log("row : ",a),e.setState({selected:a.index,from:[parseFloat(a.original.from_lat),parseFloat(a.original.from_long)],to:[parseFloat(a.original.to_lat),parseFloat(a.original.to_long)],center:[(parseFloat(a.original.from_lat)+parseFloat(a.original.to_lat))/2,(parseFloat(a.original.from_long)+parseFloat(a.original.to_long))/2],showFromMarker:!0,showToMarker:!0})},style:{background:a.index===e.state.selected?"black":"white",color:a.index===e.state.selected?"white":"black"}}:{onClick:function(t){console.log("row : ",a),e.setState({selected:a.index,showFromMarker:!1,showToMarker:!1}),m.a.toast({html:"Source/ Destination contains null value."})}}},data:this.state.jsondata,columns:this.state.columns,filterable:!0,defaultFilterMethod:function(e,t){return String(t[e.id])===e.value}})))}}]),t}(n.Component),_=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(S,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(62);s.a.render(o.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.85e1073f.chunk.js.map